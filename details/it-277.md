# IT-277: Test Case - Online-Funktionen Deaktivierung

## Test Kategorie
**Functional Test** | Online-Funktionen | infoskop-Monitor

## Zweck
Validierung der korrekten Deaktivierung aller Online-Funktionen wenn "Online-Funktionen aktivieren" auf deaktiviert gesetzt wird.

---

## Zugehörige Tickets
- **[AZUBI-403](./azubi-403.md)**: Zugriff auf Onlineformular-Einstellungen möglich
- **[AZUBI-421](./azubi-421.md)**: Deaktivierte Onlinefunktion wird nicht korrekt berücksichtigt

---

## Test-Schritte

| # | Action | Data | Expected Result |
|---|--------|------|-----------------|
| 1 | In IM zu Administration → Einstellungen → Onlineformulare navigieren und den Schalter 'Online-Funktionen aktivieren' deaktivieren. Speichern klicken | | Es werden keine Einstellungsmöglichkeiten angezeigt, außer "Online-Funktionen aktivieren" |
| 2 | In IM zu Administration → Einstellungen navigieren und die eingeblendete Seite 'infoskop Einstellungen' öffnen | | |
| 3 | Unter 'infoskop Einstellungen' prüfen, ob im Bereich 'Onlineformulare' die Unterpunkte 'Formulare', 'Vorlagen', 'Systemvorlagen' und 'Verschlüsselung' sichtbar, aber ausgegraut und nicht anklickbar sind | | Die Unterpunkte dürfen nicht funktionsfähig sein (kein Zugriff möglich) |
| 4 | Über infoskop-Client → infoskop-Base → infoskop-Base Einstellungen | | Die Unterpunkte in Bereich 'Onlineformualre' dürfen nicht funktionsfähig sein (kein Zugriff möglich). Wie in Punkt 3 beschreiben. |
| 5 | Prüfen ob der Menüeintrag 'Formulare' in Administration → Einstellungen → Onlineformulare gesperrt ist | | Formulare-Menüeintrag darf nicht zugänglich sein |
| 6 | Prüfen ob der Menüeintrag 'Vorlagen' in Administration → Einstellungen → Onlineformulare gesperrt ist | | Vorlagen-Menüeintrag darf nicht zugänglich sein |
| 7 | Prüfen ob der Menüeintrag 'Systemvorlagen' in Administration → Einstellungen → Onlineformulare gesperrt ist | | Systemvorlagen-Menüeintrag darf nicht zugänglich sein |
| 8 | Prüfen ob der Menüeintrag 'Verschlüsselung' in Administration → Einstellungen → Onlineformulare gesperrt ist | | Verschlüsselung-Menüeintrag darf nicht zugänglich sein |
| 9 | Im Patienten-Menüpunkt versuchen, eine E-Mail an einen Patienten zu senden (Mail-Icon) | | E-Mail-Senden ist nicht möglich, Mail-Icon gesperrt |
| 10 | Zum Posteingang navigieren | | Posteingang-Menüpunkt ist deaktiviert |
| 11 | Zum Postausgang navigieren | | Postausgang-Menüpunkt ist deaktiviert |
| 12 | Zum Dokumente-Menüpunkt navigieren und Mail-Icon bei einem Dokument prüfen | | Mail-Icon ist gesperrt |
| 13 | Im Auswertungen-Menü → PA-Cockpit einen Patienten auswählen und das Mail-Icon prüfen | | Mail-Icon ist gesperrt |
| 14 | Im Auswertungen-Menü → Bleaching-Cockpit einen Patienten mit E-Mail-Adresse öffnen und das Mail-Icon prüfen | | Mail-Icon ist gesperrt, es darf keine Möglichkeit bestehen eine E-Mail zu senden |
| 15 | In Stage1 einen Patienten mit E-Mail-Adresse öffnen und prüfen | | Es darf keine Möglichkeit bestehen, eine E-Mail zu versenden. |
| 16 | Zu Administration→Einstellungen→Onlineformualre→Einstellungen navigieren | | Es werden keine Einstellungsmöglichkeiten angezeigt, außer "Online-Funktionen aktivieren" |

---

## Re-Aktivierung Test

| # | Action | Data | Expected Result |
|---|--------|------|-----------------|
| 17 | Online-Funktionen aktivieren und speichern. | Für die Zuverlässigkeit, Base am besten neu starten nach der Aktivierung. | • Alle vorherige Einstellungen sind noch vorhanden.<br>• Alle Onlinefunktionen sind wieder erreichbar und funktional (ggf. Schritte 1-14 gegenprüfen auf Funktionalität) |

---

## Abdeckung

### Geprüfte Bereiche
1. **Einstellungen-UI**
   - Onlineformulare
   - Formulare, Vorlagen, Systemvorlagen, Verschlüsselung

2. **E-Mail Funktionalität**
   - Patienten-Menü
   - Posteingang/Postausgang
   - Dokumente
   - Auswertungen (PA-Cockpit, Bleaching-Cockpit)
   - Stage1

3. **Re-Aktivierung**
   - Persistenz der Einstellungen
   - Wiederherstellung der Funktionalität

---

## Test-Ergebnis

✅ **PASS** - Alle Online-Funktionen werden korrekt deaktiviert und bei Reaktivierung wiederhergestellt.

---

## Hinweise

- Base-Neustart nach Aktivierung empfohlen für Zuverlässigkeit
- Alle Einstellungen bleiben bei Deaktivierung erhalten
- Deaktivierung betrifft nur die Funktionalität, nicht die gespeicherten Konfigurationen
