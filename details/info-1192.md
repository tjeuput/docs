# INFO-1192: Infoskop-Client - Splash-Anzeigen Deduplizierung

## Kategorie
**Bug Fix** | Infoskop-Client.exe

## Beschreibung

Behebung eines Fehlers, wodurch es sein konnte, dass bei Z1 zu viele gleichartige Splash Anzeigen geladen wurden. Nur noch eine Anzeige pro Ausführung ist möglich.

### Problem

Bei Z1-Ausführungen (spezielle Startmodus-Konfiguration) trat ein Problem auf:
- **Mehrfache Splash-Screens**: Identische Anzeigen erschienen mehrfach
- **Überlappende Fenster**: Unübersichtliche Darstellung
- **Ressourcenverschwendung**: Unnötige CPU- und Speichernutzung
- **Verwirrung**: Benutzer unsicher, welche Anzeige relevant ist

### Beispiel-Szenarien

**Update-Prozess**:
- "Es wurden Updates für infoskop-Base gestartet" → erschien 3-4x
- "Updates abgeschlossen" → erschien mehrfach

**Start-Prozess**:
- Initialisierungs-Splash → mehrfache Anzeigen

### Lösung

Implementierung eines Deduplizierungs-Mechanismus:
- **Singleton-Pattern**: Nur eine Instanz einer Splash-Anzeige möglich
- **State-Management**: Prüfung, ob Anzeige bereits aktiv ist
- **Queue-System**: Mehrfach-Anforderungen werden zusammengefasst
- **Automatisches Cleanup**: Anzeigen werden nach Ablauf korrekt entfernt

---

## Auswirkung

- **Komponente**: Infoskop-Client.exe
- **Version**: 5.0.0
- **Kategorie**: Fehlerbehebung

---

## Zugehörige Tickets

- **[QS-193](./qs-193.md)**: Quality Assurance Ticket für diesen Fix
- **[IT-257](./it-257.md)**: Test Case - Update-Prozess mit Splash-Anzeigen

---

## Betroffene Splash-Anzeigen

### 1. Update-Splash-Screens
- "Es wurden Updates für infoskop-Base gestartet"
- "Updates abgeschlossen"

### 2. Start-Splash-Screens
- Initialisierungs-Anzeigen
- Lade-Bildschirme

### 3. Z1-spezifische Anzeigen
- Spezielle Splash-Screens für Z1-Modus

---

## Technische Details

### Implementierung

```
Singleton-Pattern für Splash-Anzeigen:

1. Anforderung für Splash kommt rein
   ↓
2. Prüfung: Ist diese Anzeige bereits aktiv?
   ↓
3a. JA → Anforderung ignorieren
3b. NEIN → Neue Anzeige erstellen und registrieren
   ↓
4. Anzeige wird nach Ablauf automatisch entfernt
   ↓
5. Nächste Anforderung kann neue Anzeige erstellen
```

### State-Management
- **Global Registry**: Zentrale Verwaltung aktiver Splash-Screens
- **Unique Identifier**: Jeder Splash-Typ hat eindeutige ID
- **Lifecycle-Tracking**: Aktive Anzeigen werden getrackt
- **Auto-Cleanup**: Alte Einträge werden entfernt

---

## Vorher vs. Nachher

### Vorher (mit Bug)
```
Update-Start:
┌─────────────────────────┐
│ Updates gestartet       │ ← Anzeige 1
└─────────────────────────┘
  ┌─────────────────────────┐
  │ Updates gestartet       │ ← Anzeige 2
  └─────────────────────────┘
    ┌─────────────────────────┐
    │ Updates gestartet       │ ← Anzeige 3
    └─────────────────────────┘

Ergebnis: Chaos, Ressourcenverschwendung
```

### Nachher (gefixt)
```
Update-Start:
┌─────────────────────────┐
│ Updates gestartet       │ ← Nur eine Anzeige
└─────────────────────────┘

Ergebnis: Klar, professionell
```

---

## Z1-Modus

**Z1** ist eine spezielle Startmodus-Konfiguration:
- Verwendet für bestimmte Installationsszenarien
- Kann mehrere parallele Prozesse triggern
- War besonders anfällig für Mehrfach-Anzeigen

**Fix**: Auch bei parallelen Prozessen wird nur eine Splash-Anzeige gezeigt.

---

## Update-Prozess mit korrekten Anzeigen

Siehe [IT-257 Test Case](./it-257.md) für detaillierte Test-Schritte:

| Phase | Splash-Anzeige | Position | Dauer |
|-------|----------------|----------|-------|
| Update-Start | "Es wurden Updates für infoskop-Base gestartet" | Unten rechts | Während Installation |
| Update-Ende | "Updates abgeschlossen" | Unten rechts | 2-3 Sekunden |

**Garantie**: Jede Anzeige erscheint genau **einmal**.

---

## Benutzernutzen

- **Klarheit**: Nur relevante, eindeutige Anzeigen
- **Performance**: Reduzierte Ressourcennutzung
- **Professionalität**: Saubere Benutzeroberfläche
- **Usability**: Keine Verwirrung durch Mehrfach-Anzeigen
- **Zuverlässigkeit**: Konsistentes Verhalten über alle Startmodi

---

## Zusätzliche Verbesserungen

### Timing-Optimierung
- Anzeigen erscheinen zur richtigen Zeit
- Korrekte Dauer (nicht zu kurz, nicht zu lang)
- Automatisches Schließen nach Abschluss

### Position
- Konsistent unten rechts auf dem Desktop
- Nicht überlappend mit anderen Anwendungen
- Gut sichtbar aber nicht störend

---

## Verwandte Features

Siehe auch:
- **[INFO-1196](./info-1196.md)**: "Bitte warten …" Anzeige für Webframes
- Unterschied: INFO-1196 ist für Lade-Anzeigen, INFO-1192 für Splash-Screens
